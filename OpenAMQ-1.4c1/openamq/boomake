#!/bin/sh
#
#   Boom builder for OpenAMQ 1.4c1
#   Generated by iMatix Boom from product.pwl
#   
#   Copyright (c) 1996-2009 iMatix Corporation
#   All rights reserved.
#   
#   This file is licensed under the BSD license as follows:
#   
#   Redistribution and use in source and binary forms, with or without
#   modification, are permitted provided that the following conditions
#   are met:
#   
#   * Redistributions of source code must retain the above copyright
#     notice, this list of conditions and the following disclaimer.
#   * Redistributions in binary form must reproduce the above copyright
#     notice, this list of conditions and the following disclaimer in
#     the documentation and/or other materials provided with the
#     distribution.
#   * Neither the name of iMatix Corporation nor the names of its
#     contributors may be used to endorse or promote products derived
#     from this software without specific prior written permission.
#   
#   THIS SOFTWARE IS PROVIDED BY IMATIX CORPORATION "AS IS" AND ANY
#   EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
#   IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
#   PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL IMATIX CORPORATION BE
#   LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR
#   CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF
#   SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR
#   BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
#   LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
#   NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
#   SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
#
#   Force environment variables to point to install location
#   Start by using final IBASE, then handle local -install path
#
boom_model_list () {
    set |
        awk 'BEGIN                      { FS="[=_]" }
             /^BOOM_MODEL_[A-Z0-9]*=1$/ { print $3  }'
}
boom_model_expand () {
    for MODEL in `boom_model_list`; do
        eval unset BOOM_MODEL_$MODEL
    done
    OLD_IFS=$IFS
    IFS=,
    for MODEL in $BOOM_MODEL; do
        MODEL=`echo $MODEL | tr \[a-z\] \[A-Z\]`
        eval BOOM_MODEL_$MODEL=1
        eval export BOOM_MODEL_$MODEL
    done
    IFS=$OLD_IFS
}
croak() {
    if [ -n "$*" ]; then
        echo "boom E: [OpenAMQ]: $* - stop" 1>&2
    else
        echo "boom E: [OpenAMQ]: stop" 1>&2
    fi
    exit 1
}
carp() {
    echo "boom I: [OpenAMQ]: $*" 1>&2
}
trap 'croak "Interrupted"' INT
trap 'croak "Terminated"' TERM
trap 'croak "Quit"' QUIT
self=$0
MY_VERSION="1.4c1"
#
#   Set default values for BOOM_MODEL
#
#   Default is release,mt on all platforms.
#
if [ -z "$BOOM_MODEL" ]; then
    BOOM_MODEL=release,mt
fi
boom_model_expand
if [ "$BOOM_MODEL_RELEASE" != "1" ]; then
    if [ "$BOOM_MODEL_DEBUG" != "1" ]; then
        BOOM_MODEL_RELEASE=1
        BOOM_MODEL="$BOOM_MODEL,release"
    fi
fi
if [ "$BOOM_MODEL_ST" != "1" ]; then
    if [ "$BOOM_MODEL_MT" != "1" ]; then
            BOOM_MODEL="$BOOM_MODEL,mt"
    fi
fi
if [ -z "$IBASE" ]; then
    carp "The IBASE variable is not set.  Please set it to the location where OpenAMQ should be installed."
    exit 1
fi
if [ "$1" = "-v" ]; then
    BOOM_TRACE=1
    export BOOM_TRACE
    shift
fi
if [ "$1" != "-install" ]; then
    #   Normal use, use IBASE
    PATH=.:$IBASE/bin:$PATH; export PATH
    PERLLIB=.:$IBASE/bin:$PERLLIB; export PERLLIB
    INCDIR_ALT=$IBASE/include; export INCDIR_ALT
    _LOCAL_BASE=
    _INSTALL_ROOT=$IBASE
else
    #   Building product, we use -install directory first, then IBASE
    CURDIR=`pwd`
    cd $2
    _LOCAL_BASE=`pwd`
    cd $CURDIR
    PATH=.:$_LOCAL_BASE/bin:$IBASE/bin:$PATH; export PATH
    PERLLIB=.:$_LOCAL_BASE/bin:$IBASE/bin:$PERLLIB; export PERLLIB
    INCDIR_ALT=$_LOCAL_BASE/include:$IBASE/include; export INCDIR_ALT
    shift
    shift
    _INSTALL_ROOT=$_LOCAL_BASE
fi

# ----------------------------   ALLGEN PROJECTS   ----------------------------

a_allgen_projects() {
:
    PUSHDIR=`pwd`
    cd common
    if [ -f boomake ]; then
        sh boomake allgen || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd wireapi
    if [ -f boomake ]; then
        sh boomake allgen || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd server
    if [ -f boomake ]; then
        sh boomake allgen || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd shell
    if [ -f boomake ]; then
        sh boomake allgen || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd zyre
    if [ -f boomake ]; then
        sh boomake allgen || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd windows
    if [ -f boomake ]; then
        sh boomake allgen || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
}

# --------------------   BUILD PRODUCT INSTALL PACKAGES   ---------------------

a_build_product_install_packages() {
:
    carp "Building OpenAMQ install..."
    rm -rf _install
    PUSHDIR=`pwd`
    cd common
    if [ -f boomake ]; then
        sh boomake -install ../_install install || croak
    else
        carp "Project has not been built - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd wireapi
    if [ -f boomake ]; then
        sh boomake -install ../_install install || croak
    else
        carp "Project has not been built - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd server
    if [ -f boomake ]; then
        sh boomake -install ../_install install || croak
    else
        carp "Project has not been built - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd shell
    if [ -f boomake ]; then
        sh boomake -install ../_install install || croak
    else
        carp "Project has not been built - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd zyre
    if [ -f boomake ]; then
        sh boomake -install ../_install install || croak
    else
        carp "Project has not been built - boomake is missing"
    fi
    cd $PUSHDIR
    mv _install OpenAMQ-$MY_VERSION
    [ "$BOOM_TRACE" ] && echo "pkg_tgz OpenAMQ-$MY_VERSION"
    pkg_tgz OpenAMQ-$MY_VERSION || croak "\"pkg_tgz OpenAMQ-$MY_VERSION\" failed"
    rm -rf OpenAMQ-$MY_VERSION
}

# ---------------------   BUILD PRODUCT SOURCE PACKAGES   ---------------------

a_build_product_source_packages() {
:
    rm -f _package.lst
    if [ -f "project.pdl" ]; then
        echo project.pdl>>_package.lst
    fi
    if [ -f "readme.txt" ]; then
        echo readme.txt>>_package.lst
    fi
    if [ -f "release.txt" ]; then
        echo release.txt>>_package.lst
    fi
    if [ -f "contrib.txt" ]; then
        echo contrib.txt>>_package.lst
    fi
    if [ -f "stamp_generate" ]; then
        echo stamp_generate>>_package.lst
    fi
    if [ -f "boomakew.bat" ]; then
        echo boomakew.bat>>_package.lst
    fi
    if [ -f "configure" ]; then
        echo configure>>_package.lst
    fi
    if [ -f "Makefile.unix" ]; then
        echo Makefile.unix>>_package.lst
    fi
    if [ -f "boomake" ]; then
        echo boomake>>_package.lst
    fi
    if [ -f "configure.bat" ]; then
        echo configure.bat>>_package.lst
    fi
    if [ -f "Makefile.win32" ]; then
        echo Makefile.win32>>_package.lst
    fi
    if [ -f "boomake.bat" ]; then
        echo boomake.bat>>_package.lst
    fi
    PUSHDIR=`pwd`
    cd common
    cd $PUSHDIR
    if [ -f "common/version.h" ]; then
        echo common/version.h>>_package.lst
    fi
    if [ -f "common/amq.asl" ]; then
        echo common/amq.asl>>_package.lst
    fi
    if [ -f "common/amq_exchange.asl" ]; then
        echo common/amq_exchange.asl>>_package.lst
    fi
    if [ -f "common/amq_queue.asl" ]; then
        echo common/amq_queue.asl>>_package.lst
    fi
    if [ -f "common/amq_basic.asl" ]; then
        echo common/amq_basic.asl>>_package.lst
    fi
    if [ -f "common/amq_restms.asl" ]; then
        echo common/amq_restms.asl>>_package.lst
    fi
    if [ -f "common/amq_pal.xnf" ]; then
        echo common/amq_pal.xnf>>_package.lst
    fi
    if [ -f "common/amq_pal_stdc.gsl" ]; then
        echo common/amq_pal_stdc.gsl>>_package.lst
    fi
    if [ -f "common/amq_pal_codegen.gsl" ]; then
        echo common/amq_pal_codegen.gsl>>_package.lst
    fi
    if [ -f "common/amq_pal_gen.gsl" ]; then
        echo common/amq_pal_gen.gsl>>_package.lst
    fi
    if [ -f "common/amq_pal_inherit.gsl" ]; then
        echo common/amq_pal_inherit.gsl>>_package.lst
    fi
    if [ -f "common/amq_pal_parse.gsl" ]; then
        echo common/amq_pal_parse.gsl>>_package.lst
    fi
    if [ -f "common/amq_pal_preproc.gsl" ]; then
        echo common/amq_pal_preproc.gsl>>_package.lst
    fi
    if [ -f "common/amq_sequence.icl" ]; then
        echo common/amq_sequence.icl>>_package.lst
    fi
    if [ -f "common/amq_sequence_table.icl" ]; then
        echo common/amq_sequence_table.icl>>_package.lst
    fi
    if [ -f "common/amq_constants.icl" ]; then
        echo common/amq_constants.icl>>_package.lst
    fi
    if [ -f "common/amq_content_basic.icl" ]; then
        echo common/amq_content_basic.icl>>_package.lst
    fi
    if [ -f "common/amq_content_basic_list.icl" ]; then
        echo common/amq_content_basic_list.icl>>_package.lst
    fi
    if [ -f "common/prelude.pdl" ]; then
        echo common/prelude.pdl>>_package.lst
    fi
    if [ -f "common/license.gpl" ]; then
        echo common/license.gpl>>_package.lst
    fi
    if [ -f "common/project.pdl" ]; then
        echo common/project.pdl>>_package.lst
    fi
    if [ -f "common/readme.txt" ]; then
        echo common/readme.txt>>_package.lst
    fi
    if [ -f "common/amq_sequence_test.c" ]; then
        echo common/amq_sequence_test.c>>_package.lst
    fi
    if [ -f "common/amq_sequence.h" ]; then
        echo common/amq_sequence.h>>_package.lst
    fi
    if [ -f "common/amq_sequence.c" ]; then
        echo common/amq_sequence.c>>_package.lst
    fi
    if [ -f "common/amq_sequence_table_test.c" ]; then
        echo common/amq_sequence_table_test.c>>_package.lst
    fi
    if [ -f "common/amq_sequence_table.h" ]; then
        echo common/amq_sequence_table.h>>_package.lst
    fi
    if [ -f "common/amq_sequence_table.c" ]; then
        echo common/amq_sequence_table.c>>_package.lst
    fi
    if [ -f "common/amq_constants.h" ]; then
        echo common/amq_constants.h>>_package.lst
    fi
    if [ -f "common/amq_constants.c" ]; then
        echo common/amq_constants.c>>_package.lst
    fi
    if [ -f "common/amq_content_basic_test.c" ]; then
        echo common/amq_content_basic_test.c>>_package.lst
    fi
    if [ -f "common/amq_content_basic.h" ]; then
        echo common/amq_content_basic.h>>_package.lst
    fi
    if [ -f "common/amq_content_basic.c" ]; then
        echo common/amq_content_basic.c>>_package.lst
    fi
    if [ -f "common/amq_content_basic_list_test.c" ]; then
        echo common/amq_content_basic_list_test.c>>_package.lst
    fi
    if [ -f "common/amq_content_basic_list.h" ]; then
        echo common/amq_content_basic_list.h>>_package.lst
    fi
    if [ -f "common/amq_content_basic_list.c" ]; then
        echo common/amq_content_basic_list.c>>_package.lst
    fi
    if [ -f "common/stamp_generate" ]; then
        echo common/stamp_generate>>_package.lst
    fi
    if [ -f "common/boomakew.bat" ]; then
        echo common/boomakew.bat>>_package.lst
    fi
    if [ -f "common/configure" ]; then
        echo common/configure>>_package.lst
    fi
    if [ -f "common/Makefile.unix" ]; then
        echo common/Makefile.unix>>_package.lst
    fi
    if [ -f "common/boomake" ]; then
        echo common/boomake>>_package.lst
    fi
    if [ -f "common/configure.bat" ]; then
        echo common/configure.bat>>_package.lst
    fi
    if [ -f "common/Makefile.win32" ]; then
        echo common/Makefile.win32>>_package.lst
    fi
    if [ -f "common/boomake.bat" ]; then
        echo common/boomake.bat>>_package.lst
    fi
    if [ -f "common/libamq_common.vcproj" ]; then
        echo common/libamq_common.vcproj>>_package.lst
    fi
    PUSHDIR=`pwd`
    cd wireapi
    cd $PUSHDIR
    if [ -f "wireapi/version.h" ]; then
        echo wireapi/version.h>>_package.lst
    fi
    if [ -f "wireapi/wireapi.h" ]; then
        echo wireapi/wireapi.h>>_package.lst
    fi
    if [ -f "wireapi/amq_client.c" ]; then
        echo wireapi/amq_client.c>>_package.lst
    fi
    if [ -f "wireapi/amq_client.asl" ]; then
        echo wireapi/amq_client.asl>>_package.lst
    fi
    if [ -f "wireapi/amq_client_method.icl" ]; then
        echo wireapi/amq_client_method.icl>>_package.lst
    fi
    if [ -f "wireapi/amq_client_agent.smt" ]; then
        echo wireapi/amq_client_agent.smt>>_package.lst
    fi
    if [ -f "wireapi/amq_client_config.opf" ]; then
        echo wireapi/amq_client_config.opf>>_package.lst
    fi
    if [ -f "wireapi/amq_client_config.icl" ]; then
        echo wireapi/amq_client_config.icl>>_package.lst
    fi
    if [ -f "wireapi/amq_client_classes.icl" ]; then
        echo wireapi/amq_client_classes.icl>>_package.lst
    fi
    if [ -f "wireapi/amq_client_connection.icl" ]; then
        echo wireapi/amq_client_connection.icl>>_package.lst
    fi
    if [ -f "wireapi/amq_client_session.icl" ]; then
        echo wireapi/amq_client_session.icl>>_package.lst
    fi
    if [ -f "wireapi/amq_client_channel.icl" ]; then
        echo wireapi/amq_client_channel.icl>>_package.lst
    fi
    if [ -f "wireapi/amq_client_channel_table.icl" ]; then
        echo wireapi/amq_client_channel_table.icl>>_package.lst
    fi
    if [ -f "wireapi/amq_client_chrono.pal" ]; then
        echo wireapi/amq_client_chrono.pal>>_package.lst
    fi
    if [ -f "wireapi/prelude.pdl" ]; then
        echo wireapi/prelude.pdl>>_package.lst
    fi
    if [ -f "wireapi/license.gpl" ]; then
        echo wireapi/license.gpl>>_package.lst
    fi
    if [ -f "wireapi/project.pdl" ]; then
        echo wireapi/project.pdl>>_package.lst
    fi
    if [ -f "wireapi/readme.txt" ]; then
        echo wireapi/readme.txt>>_package.lst
    fi
    if [ -f "wireapi/amq_client_method_test.c" ]; then
        echo wireapi/amq_client_method_test.c>>_package.lst
    fi
    if [ -f "wireapi/amq_client_method.h" ]; then
        echo wireapi/amq_client_method.h>>_package.lst
    fi
    if [ -f "wireapi/amq_client_method.c" ]; then
        echo wireapi/amq_client_method.c>>_package.lst
    fi
    if [ -f "wireapi/amq_client_agent.h" ]; then
        echo wireapi/amq_client_agent.h>>_package.lst
    fi
    if [ -f "wireapi/amq_client_agent.c" ]; then
        echo wireapi/amq_client_agent.c>>_package.lst
    fi
    if [ -f "wireapi/amq_client_config_test.c" ]; then
        echo wireapi/amq_client_config_test.c>>_package.lst
    fi
    if [ -f "wireapi/amq_client_config.h" ]; then
        echo wireapi/amq_client_config.h>>_package.lst
    fi
    if [ -f "wireapi/amq_client_config.c" ]; then
        echo wireapi/amq_client_config.c>>_package.lst
    fi
    if [ -f "wireapi/amq_client_classes.h" ]; then
        echo wireapi/amq_client_classes.h>>_package.lst
    fi
    if [ -f "wireapi/amq_client_classes.c" ]; then
        echo wireapi/amq_client_classes.c>>_package.lst
    fi
    if [ -f "wireapi/amq_client_connection_test.c" ]; then
        echo wireapi/amq_client_connection_test.c>>_package.lst
    fi
    if [ -f "wireapi/amq_client_connection.h" ]; then
        echo wireapi/amq_client_connection.h>>_package.lst
    fi
    if [ -f "wireapi/amq_client_connection.c" ]; then
        echo wireapi/amq_client_connection.c>>_package.lst
    fi
    if [ -f "wireapi/amq_client_session_test.c" ]; then
        echo wireapi/amq_client_session_test.c>>_package.lst
    fi
    if [ -f "wireapi/amq_client_session.h" ]; then
        echo wireapi/amq_client_session.h>>_package.lst
    fi
    if [ -f "wireapi/amq_client_session.c" ]; then
        echo wireapi/amq_client_session.c>>_package.lst
    fi
    if [ -f "wireapi/amq_client_channel_test.c" ]; then
        echo wireapi/amq_client_channel_test.c>>_package.lst
    fi
    if [ -f "wireapi/amq_client_channel.h" ]; then
        echo wireapi/amq_client_channel.h>>_package.lst
    fi
    if [ -f "wireapi/amq_client_channel.c" ]; then
        echo wireapi/amq_client_channel.c>>_package.lst
    fi
    if [ -f "wireapi/amq_client_channel_table_test.c" ]; then
        echo wireapi/amq_client_channel_table_test.c>>_package.lst
    fi
    if [ -f "wireapi/amq_client_channel_table.h" ]; then
        echo wireapi/amq_client_channel_table.h>>_package.lst
    fi
    if [ -f "wireapi/amq_client_channel_table.c" ]; then
        echo wireapi/amq_client_channel_table.c>>_package.lst
    fi
    if [ -f "wireapi/stamp_generate" ]; then
        echo wireapi/stamp_generate>>_package.lst
    fi
    if [ -f "wireapi/boomakew.bat" ]; then
        echo wireapi/boomakew.bat>>_package.lst
    fi
    if [ -f "wireapi/configure" ]; then
        echo wireapi/configure>>_package.lst
    fi
    if [ -f "wireapi/Makefile.unix" ]; then
        echo wireapi/Makefile.unix>>_package.lst
    fi
    if [ -f "wireapi/boomake" ]; then
        echo wireapi/boomake>>_package.lst
    fi
    if [ -f "wireapi/configure.bat" ]; then
        echo wireapi/configure.bat>>_package.lst
    fi
    if [ -f "wireapi/Makefile.win32" ]; then
        echo wireapi/Makefile.win32>>_package.lst
    fi
    if [ -f "wireapi/boomake.bat" ]; then
        echo wireapi/boomake.bat>>_package.lst
    fi
    if [ -f "wireapi/amq_client.vcproj" ]; then
        echo wireapi/amq_client.vcproj>>_package.lst
    fi
    if [ -f "wireapi/libamq_wireapi.vcproj" ]; then
        echo wireapi/libamq_wireapi.vcproj>>_package.lst
    fi
    PUSHDIR=`pwd`
    cd server
    cd $PUSHDIR
    if [ -f "server/gpl_output" ]; then
        echo server/gpl_output>>_package.lst
    fi
    if [ -f "server/version.h" ]; then
        echo server/version.h>>_package.lst
    fi
    if [ -f "server/amq_server.asl" ]; then
        echo server/amq_server.asl>>_package.lst
    fi
    if [ -f "server/amq_server.c" ]; then
        echo server/amq_server.c>>_package.lst
    fi
    if [ -f "server/amq_server_main.inc" ]; then
        echo server/amq_server_main.inc>>_package.lst
    fi
    if [ -f "server/amq_server_config.opf" ]; then
        echo server/amq_server_config.opf>>_package.lst
    fi
    if [ -f "server/amq_server_agent.smt" ]; then
        echo server/amq_server_agent.smt>>_package.lst
    fi
    if [ -f "server/amq_server_classes.icl" ]; then
        echo server/amq_server_classes.icl>>_package.lst
    fi
    if [ -f "server/amq_server_connection.icl" ]; then
        echo server/amq_server_connection.icl>>_package.lst
    fi
    if [ -f "server/amq_server_connection_table.icl" ]; then
        echo server/amq_server_connection_table.icl>>_package.lst
    fi
    if [ -f "server/amq_server_connection_list.icl" ]; then
        echo server/amq_server_connection_list.icl>>_package.lst
    fi
    if [ -f "server/amq_server_channel.icl" ]; then
        echo server/amq_server_channel.icl>>_package.lst
    fi
    if [ -f "server/amq_server_channel_table.icl" ]; then
        echo server/amq_server_channel_table.icl>>_package.lst
    fi
    if [ -f "server/amq_server_resource.rc" ]; then
        echo server/amq_server_resource.rc>>_package.lst
    fi
    if [ -f "server/amq_server_resource.icl" ]; then
        echo server/amq_server_resource.icl>>_package.lst
    fi
    if [ -f "server/amq_broker.icl" ]; then
        echo server/amq_broker.icl>>_package.lst
    fi
    if [ -f "server/amq_peering.icl" ]; then
        echo server/amq_peering.icl>>_package.lst
    fi
    if [ -f "server/amq_peer.asl" ]; then
        echo server/amq_peer.asl>>_package.lst
    fi
    if [ -f "server/amq_peer_method.icl" ]; then
        echo server/amq_peer_method.icl>>_package.lst
    fi
    if [ -f "server/amq_peer_config.opf" ]; then
        echo server/amq_peer_config.opf>>_package.lst
    fi
    if [ -f "server/amq_peer_agent.smt" ]; then
        echo server/amq_peer_agent.smt>>_package.lst
    fi
    if [ -f "server/amq_exchange_system.icl" ]; then
        echo server/amq_exchange_system.icl>>_package.lst
    fi
    if [ -f "server/amq_exchange_fanout.icl" ]; then
        echo server/amq_exchange_fanout.icl>>_package.lst
    fi
    if [ -f "server/amq_exchange_direct.icl" ]; then
        echo server/amq_exchange_direct.icl>>_package.lst
    fi
    if [ -f "server/amq_exchange_topic.icl" ]; then
        echo server/amq_exchange_topic.icl>>_package.lst
    fi
    if [ -f "server/amq_exchange_headers.icl" ]; then
        echo server/amq_exchange_headers.icl>>_package.lst
    fi
    if [ -f "server/amq_exchange_regexp.icl" ]; then
        echo server/amq_exchange_regexp.icl>>_package.lst
    fi
    if [ -f "server/amq_exchange_base.icl" ]; then
        echo server/amq_exchange_base.icl>>_package.lst
    fi
    if [ -f "server/amq_exchange.icl" ]; then
        echo server/amq_exchange.icl>>_package.lst
    fi
    if [ -f "server/amq_exchange_table.icl" ]; then
        echo server/amq_exchange_table.icl>>_package.lst
    fi
    if [ -f "server/amq_exchange_list.icl" ]; then
        echo server/amq_exchange_list.icl>>_package.lst
    fi
    if [ -f "server/amq_binding.icl" ]; then
        echo server/amq_binding.icl>>_package.lst
    fi
    if [ -f "server/amq_binding_list.icl" ]; then
        echo server/amq_binding_list.icl>>_package.lst
    fi
    if [ -f "server/amq_binding_mgt.icl" ]; then
        echo server/amq_binding_mgt.icl>>_package.lst
    fi
    if [ -f "server/amq_queue_bindings_list.icl" ]; then
        echo server/amq_queue_bindings_list.icl>>_package.lst
    fi
    if [ -f "server/amq_queue_bindings_list_table.icl" ]; then
        echo server/amq_queue_bindings_list_table.icl>>_package.lst
    fi
    if [ -f "server/amq_hitset.icl" ]; then
        echo server/amq_hitset.icl>>_package.lst
    fi
    if [ -f "server/amq_index.icl" ]; then
        echo server/amq_index.icl>>_package.lst
    fi
    if [ -f "server/amq_index_hash.icl" ]; then
        echo server/amq_index_hash.icl>>_package.lst
    fi
    if [ -f "server/amq_index_array.icl" ]; then
        echo server/amq_index_array.icl>>_package.lst
    fi
    if [ -f "server/amq_queue.icl" ]; then
        echo server/amq_queue.icl>>_package.lst
    fi
    if [ -f "server/amq_queue_table.icl" ]; then
        echo server/amq_queue_table.icl>>_package.lst
    fi
    if [ -f "server/amq_queue_list.icl" ]; then
        echo server/amq_queue_list.icl>>_package.lst
    fi
    if [ -f "server/amq_queue_set.icl" ]; then
        echo server/amq_queue_set.icl>>_package.lst
    fi
    if [ -f "server/amq_queue_basic.icl" ]; then
        echo server/amq_queue_basic.icl>>_package.lst
    fi
    if [ -f "server/amq_connection.icl" ]; then
        echo server/amq_connection.icl>>_package.lst
    fi
    if [ -f "server/amq_connection_by_broker.icl" ]; then
        echo server/amq_connection_by_broker.icl>>_package.lst
    fi
    if [ -f "server/amq_consumer.icl" ]; then
        echo server/amq_consumer.icl>>_package.lst
    fi
    if [ -f "server/amq_consumer_table.icl" ]; then
        echo server/amq_consumer_table.icl>>_package.lst
    fi
    if [ -f "server/amq_consumer_by_queue.icl" ]; then
        echo server/amq_consumer_by_queue.icl>>_package.lst
    fi
    if [ -f "server/amq_consumer_by_channel.icl" ]; then
        echo server/amq_consumer_by_channel.icl>>_package.lst
    fi
    if [ -f "server/amq_consumer_basic.icl" ]; then
        echo server/amq_consumer_basic.icl>>_package.lst
    fi
    if [ -f "server/amq_queue_connection.icl" ]; then
        echo server/amq_queue_connection.icl>>_package.lst
    fi
    if [ -f "server/amq_queue_binding.icl" ]; then
        echo server/amq_queue_binding.icl>>_package.lst
    fi
    if [ -f "server/amq_connection_queue.icl" ]; then
        echo server/amq_connection_queue.icl>>_package.lst
    fi
    if [ -f "server/amq_resource.icl" ]; then
        echo server/amq_resource.icl>>_package.lst
    fi
    if [ -f "server/amq_server_method.icl" ]; then
        echo server/amq_server_method.icl>>_package.lst
    fi
    if [ -f "server/amq_server_base.cfg" ]; then
        echo server/amq_server_base.cfg>>_package.lst
    fi
    if [ -f "server/amq_federation.icl" ]; then
        echo server/amq_federation.icl>>_package.lst
    fi
    if [ -f "server/amq_failover.icl" ]; then
        echo server/amq_failover.icl>>_package.lst
    fi
    if [ -f "server/amq_lease.icl" ]; then
        echo server/amq_lease.icl>>_package.lst
    fi
    if [ -f "server/amq_lease_table.icl" ]; then
        echo server/amq_lease_table.icl>>_package.lst
    fi
    if [ -f "server/amq_console.icl" ]; then
        echo server/amq_console.icl>>_package.lst
    fi
    if [ -f "server/amq_console_object.icl" ]; then
        echo server/amq_console_object.icl>>_package.lst
    fi
    if [ -f "server/amq_console_class.icl" ]; then
        echo server/amq_console_class.icl>>_package.lst
    fi
    if [ -f "server/amq_console_schema.gsl" ]; then
        echo server/amq_console_schema.gsl>>_package.lst
    fi
    if [ -f "server/amq_console_schema.cml" ]; then
        echo server/amq_console_schema.cml>>_package.lst
    fi
    if [ -f "server/amq_console_schema.xml" ]; then
        echo server/amq_console_schema.xml>>_package.lst
    fi
    if [ -f "server/amq_console_config.gsl" ]; then
        echo server/amq_console_config.gsl>>_package.lst
    fi
    if [ -f "server/amq_console_config.icl" ]; then
        echo server/amq_console_config.icl>>_package.lst
    fi
    if [ -f "server/amq_cml.icl" ]; then
        echo server/amq_cml.icl>>_package.lst
    fi
    if [ -f "server/restms_class_test.pal" ]; then
        echo server/restms_class_test.pal>>_package.lst
    fi
    if [ -f "server/prelude.pdl" ]; then
        echo server/prelude.pdl>>_package.lst
    fi
    if [ -f "server/license.gpl" ]; then
        echo server/license.gpl>>_package.lst
    fi
    if [ -f "server/project.pdl" ]; then
        echo server/project.pdl>>_package.lst
    fi
    if [ -f "server/readme.txt" ]; then
        echo server/readme.txt>>_package.lst
    fi
    if [ -f "server/amq_server_config.icl" ]; then
        echo server/amq_server_config.icl>>_package.lst
    fi
    if [ -f "server/amq_server_config_test.c" ]; then
        echo server/amq_server_config_test.c>>_package.lst
    fi
    if [ -f "server/amq_server_config.h" ]; then
        echo server/amq_server_config.h>>_package.lst
    fi
    if [ -f "server/amq_server_config.c" ]; then
        echo server/amq_server_config.c>>_package.lst
    fi
    if [ -f "server/amq_server_config.txt" ]; then
        echo server/amq_server_config.txt>>_package.lst
    fi
    if [ -f "server/amq_server_agent.h" ]; then
        echo server/amq_server_agent.h>>_package.lst
    fi
    if [ -f "server/amq_server_agent.c" ]; then
        echo server/amq_server_agent.c>>_package.lst
    fi
    if [ -f "server/amq_server_classes.h" ]; then
        echo server/amq_server_classes.h>>_package.lst
    fi
    if [ -f "server/amq_server_classes.c" ]; then
        echo server/amq_server_classes.c>>_package.lst
    fi
    if [ -f "server/amq_server_connection_test.c" ]; then
        echo server/amq_server_connection_test.c>>_package.lst
    fi
    if [ -f "server/amq_server_connection.h" ]; then
        echo server/amq_server_connection.h>>_package.lst
    fi
    if [ -f "server/amq_server_connection.c" ]; then
        echo server/amq_server_connection.c>>_package.lst
    fi
    if [ -f "server/amq_server_connection_table_test.c" ]; then
        echo server/amq_server_connection_table_test.c>>_package.lst
    fi
    if [ -f "server/amq_server_connection_table.h" ]; then
        echo server/amq_server_connection_table.h>>_package.lst
    fi
    if [ -f "server/amq_server_connection_table.c" ]; then
        echo server/amq_server_connection_table.c>>_package.lst
    fi
    if [ -f "server/amq_server_connection_list_test.c" ]; then
        echo server/amq_server_connection_list_test.c>>_package.lst
    fi
    if [ -f "server/amq_server_connection_list.h" ]; then
        echo server/amq_server_connection_list.h>>_package.lst
    fi
    if [ -f "server/amq_server_connection_list.c" ]; then
        echo server/amq_server_connection_list.c>>_package.lst
    fi
    if [ -f "server/amq_server_channel_agent.smt" ]; then
        echo server/amq_server_channel_agent.smt>>_package.lst
    fi
    if [ -f "server/amq_server_channel_agent.h" ]; then
        echo server/amq_server_channel_agent.h>>_package.lst
    fi
    if [ -f "server/amq_server_channel_agent.c" ]; then
        echo server/amq_server_channel_agent.c>>_package.lst
    fi
    if [ -f "server/amq_server_channel_test.c" ]; then
        echo server/amq_server_channel_test.c>>_package.lst
    fi
    if [ -f "server/amq_server_channel.h" ]; then
        echo server/amq_server_channel.h>>_package.lst
    fi
    if [ -f "server/amq_server_channel.c" ]; then
        echo server/amq_server_channel.c>>_package.lst
    fi
    if [ -f "server/amq_server_channel_table_test.c" ]; then
        echo server/amq_server_channel_table_test.c>>_package.lst
    fi
    if [ -f "server/amq_server_channel_table.h" ]; then
        echo server/amq_server_channel_table.h>>_package.lst
    fi
    if [ -f "server/amq_server_channel_table.c" ]; then
        echo server/amq_server_channel_table.c>>_package.lst
    fi
    if [ -f "server/amq_server_resource_test.c" ]; then
        echo server/amq_server_resource_test.c>>_package.lst
    fi
    if [ -f "server/amq_server_resource.h" ]; then
        echo server/amq_server_resource.h>>_package.lst
    fi
    if [ -f "server/amq_server_resource.c" ]; then
        echo server/amq_server_resource.c>>_package.lst
    fi
    if [ -f "server/amq_broker_agent.smt" ]; then
        echo server/amq_broker_agent.smt>>_package.lst
    fi
    if [ -f "server/amq_broker_agent.h" ]; then
        echo server/amq_broker_agent.h>>_package.lst
    fi
    if [ -f "server/amq_broker_agent.c" ]; then
        echo server/amq_broker_agent.c>>_package.lst
    fi
    if [ -f "server/amq_broker_test.c" ]; then
        echo server/amq_broker_test.c>>_package.lst
    fi
    if [ -f "server/amq_broker.h" ]; then
        echo server/amq_broker.h>>_package.lst
    fi
    if [ -f "server/amq_broker.c" ]; then
        echo server/amq_broker.c>>_package.lst
    fi
    if [ -f "server/amq_peering_agent.smt" ]; then
        echo server/amq_peering_agent.smt>>_package.lst
    fi
    if [ -f "server/amq_peering_agent.h" ]; then
        echo server/amq_peering_agent.h>>_package.lst
    fi
    if [ -f "server/amq_peering_agent.c" ]; then
        echo server/amq_peering_agent.c>>_package.lst
    fi
    if [ -f "server/amq_peering_test.c" ]; then
        echo server/amq_peering_test.c>>_package.lst
    fi
    if [ -f "server/amq_peering.h" ]; then
        echo server/amq_peering.h>>_package.lst
    fi
    if [ -f "server/amq_peering.c" ]; then
        echo server/amq_peering.c>>_package.lst
    fi
    if [ -f "server/amq_peer_method_test.c" ]; then
        echo server/amq_peer_method_test.c>>_package.lst
    fi
    if [ -f "server/amq_peer_method.h" ]; then
        echo server/amq_peer_method.h>>_package.lst
    fi
    if [ -f "server/amq_peer_method.c" ]; then
        echo server/amq_peer_method.c>>_package.lst
    fi
    if [ -f "server/amq_peer_config.icl" ]; then
        echo server/amq_peer_config.icl>>_package.lst
    fi
    if [ -f "server/amq_peer_config_test.c" ]; then
        echo server/amq_peer_config_test.c>>_package.lst
    fi
    if [ -f "server/amq_peer_config.h" ]; then
        echo server/amq_peer_config.h>>_package.lst
    fi
    if [ -f "server/amq_peer_config.c" ]; then
        echo server/amq_peer_config.c>>_package.lst
    fi
    if [ -f "server/amq_peer_config.txt" ]; then
        echo server/amq_peer_config.txt>>_package.lst
    fi
    if [ -f "server/amq_peer_agent.h" ]; then
        echo server/amq_peer_agent.h>>_package.lst
    fi
    if [ -f "server/amq_peer_agent.c" ]; then
        echo server/amq_peer_agent.c>>_package.lst
    fi
    if [ -f "server/amq_exchange_system_test.c" ]; then
        echo server/amq_exchange_system_test.c>>_package.lst
    fi
    if [ -f "server/amq_exchange_system.h" ]; then
        echo server/amq_exchange_system.h>>_package.lst
    fi
    if [ -f "server/amq_exchange_system.c" ]; then
        echo server/amq_exchange_system.c>>_package.lst
    fi
    if [ -f "server/amq_exchange_fanout_test.c" ]; then
        echo server/amq_exchange_fanout_test.c>>_package.lst
    fi
    if [ -f "server/amq_exchange_fanout.h" ]; then
        echo server/amq_exchange_fanout.h>>_package.lst
    fi
    if [ -f "server/amq_exchange_fanout.c" ]; then
        echo server/amq_exchange_fanout.c>>_package.lst
    fi
    if [ -f "server/amq_exchange_direct_test.c" ]; then
        echo server/amq_exchange_direct_test.c>>_package.lst
    fi
    if [ -f "server/amq_exchange_direct.h" ]; then
        echo server/amq_exchange_direct.h>>_package.lst
    fi
    if [ -f "server/amq_exchange_direct.c" ]; then
        echo server/amq_exchange_direct.c>>_package.lst
    fi
    if [ -f "server/amq_exchange_topic_test.c" ]; then
        echo server/amq_exchange_topic_test.c>>_package.lst
    fi
    if [ -f "server/amq_exchange_topic.h" ]; then
        echo server/amq_exchange_topic.h>>_package.lst
    fi
    if [ -f "server/amq_exchange_topic.c" ]; then
        echo server/amq_exchange_topic.c>>_package.lst
    fi
    if [ -f "server/amq_exchange_headers_test.c" ]; then
        echo server/amq_exchange_headers_test.c>>_package.lst
    fi
    if [ -f "server/amq_exchange_headers.h" ]; then
        echo server/amq_exchange_headers.h>>_package.lst
    fi
    if [ -f "server/amq_exchange_headers.c" ]; then
        echo server/amq_exchange_headers.c>>_package.lst
    fi
    if [ -f "server/amq_exchange_regexp_test.c" ]; then
        echo server/amq_exchange_regexp_test.c>>_package.lst
    fi
    if [ -f "server/amq_exchange_regexp.h" ]; then
        echo server/amq_exchange_regexp.h>>_package.lst
    fi
    if [ -f "server/amq_exchange_regexp.c" ]; then
        echo server/amq_exchange_regexp.c>>_package.lst
    fi
    if [ -f "server/amq_exchange_agent.smt" ]; then
        echo server/amq_exchange_agent.smt>>_package.lst
    fi
    if [ -f "server/amq_exchange_agent.h" ]; then
        echo server/amq_exchange_agent.h>>_package.lst
    fi
    if [ -f "server/amq_exchange_agent.c" ]; then
        echo server/amq_exchange_agent.c>>_package.lst
    fi
    if [ -f "server/amq_exchange_test.c" ]; then
        echo server/amq_exchange_test.c>>_package.lst
    fi
    if [ -f "server/amq_exchange.h" ]; then
        echo server/amq_exchange.h>>_package.lst
    fi
    if [ -f "server/amq_exchange.c" ]; then
        echo server/amq_exchange.c>>_package.lst
    fi
    if [ -f "server/amq_exchange_table_test.c" ]; then
        echo server/amq_exchange_table_test.c>>_package.lst
    fi
    if [ -f "server/amq_exchange_table.h" ]; then
        echo server/amq_exchange_table.h>>_package.lst
    fi
    if [ -f "server/amq_exchange_table.c" ]; then
        echo server/amq_exchange_table.c>>_package.lst
    fi
    if [ -f "server/amq_exchange_list_test.c" ]; then
        echo server/amq_exchange_list_test.c>>_package.lst
    fi
    if [ -f "server/amq_exchange_list.h" ]; then
        echo server/amq_exchange_list.h>>_package.lst
    fi
    if [ -f "server/amq_exchange_list.c" ]; then
        echo server/amq_exchange_list.c>>_package.lst
    fi
    if [ -f "server/amq_binding_test.c" ]; then
        echo server/amq_binding_test.c>>_package.lst
    fi
    if [ -f "server/amq_binding.h" ]; then
        echo server/amq_binding.h>>_package.lst
    fi
    if [ -f "server/amq_binding.c" ]; then
        echo server/amq_binding.c>>_package.lst
    fi
    if [ -f "server/amq_binding_list_test.c" ]; then
        echo server/amq_binding_list_test.c>>_package.lst
    fi
    if [ -f "server/amq_binding_list.h" ]; then
        echo server/amq_binding_list.h>>_package.lst
    fi
    if [ -f "server/amq_binding_list.c" ]; then
        echo server/amq_binding_list.c>>_package.lst
    fi
    if [ -f "server/amq_binding_mgt_agent.smt" ]; then
        echo server/amq_binding_mgt_agent.smt>>_package.lst
    fi
    if [ -f "server/amq_binding_mgt_agent.h" ]; then
        echo server/amq_binding_mgt_agent.h>>_package.lst
    fi
    if [ -f "server/amq_binding_mgt_agent.c" ]; then
        echo server/amq_binding_mgt_agent.c>>_package.lst
    fi
    if [ -f "server/amq_binding_mgt_test.c" ]; then
        echo server/amq_binding_mgt_test.c>>_package.lst
    fi
    if [ -f "server/amq_binding_mgt.h" ]; then
        echo server/amq_binding_mgt.h>>_package.lst
    fi
    if [ -f "server/amq_binding_mgt.c" ]; then
        echo server/amq_binding_mgt.c>>_package.lst
    fi
    if [ -f "server/amq_queue_bindings_list_test.c" ]; then
        echo server/amq_queue_bindings_list_test.c>>_package.lst
    fi
    if [ -f "server/amq_queue_bindings_list.h" ]; then
        echo server/amq_queue_bindings_list.h>>_package.lst
    fi
    if [ -f "server/amq_queue_bindings_list.c" ]; then
        echo server/amq_queue_bindings_list.c>>_package.lst
    fi
    if [ -f "server/amq_queue_bindings_list_table_test.c" ]; then
        echo server/amq_queue_bindings_list_table_test.c>>_package.lst
    fi
    if [ -f "server/amq_queue_bindings_list_table.h" ]; then
        echo server/amq_queue_bindings_list_table.h>>_package.lst
    fi
    if [ -f "server/amq_queue_bindings_list_table.c" ]; then
        echo server/amq_queue_bindings_list_table.c>>_package.lst
    fi
    if [ -f "server/amq_hitset_test.c" ]; then
        echo server/amq_hitset_test.c>>_package.lst
    fi
    if [ -f "server/amq_hitset.h" ]; then
        echo server/amq_hitset.h>>_package.lst
    fi
    if [ -f "server/amq_hitset.c" ]; then
        echo server/amq_hitset.c>>_package.lst
    fi
    if [ -f "server/amq_index_test.c" ]; then
        echo server/amq_index_test.c>>_package.lst
    fi
    if [ -f "server/amq_index.h" ]; then
        echo server/amq_index.h>>_package.lst
    fi
    if [ -f "server/amq_index.c" ]; then
        echo server/amq_index.c>>_package.lst
    fi
    if [ -f "server/amq_index_hash_test.c" ]; then
        echo server/amq_index_hash_test.c>>_package.lst
    fi
    if [ -f "server/amq_index_hash.h" ]; then
        echo server/amq_index_hash.h>>_package.lst
    fi
    if [ -f "server/amq_index_hash.c" ]; then
        echo server/amq_index_hash.c>>_package.lst
    fi
    if [ -f "server/amq_index_array_test.c" ]; then
        echo server/amq_index_array_test.c>>_package.lst
    fi
    if [ -f "server/amq_index_array.h" ]; then
        echo server/amq_index_array.h>>_package.lst
    fi
    if [ -f "server/amq_index_array.c" ]; then
        echo server/amq_index_array.c>>_package.lst
    fi
    if [ -f "server/amq_queue_agent.smt" ]; then
        echo server/amq_queue_agent.smt>>_package.lst
    fi
    if [ -f "server/amq_queue_agent.h" ]; then
        echo server/amq_queue_agent.h>>_package.lst
    fi
    if [ -f "server/amq_queue_agent.c" ]; then
        echo server/amq_queue_agent.c>>_package.lst
    fi
    if [ -f "server/amq_queue_test.c" ]; then
        echo server/amq_queue_test.c>>_package.lst
    fi
    if [ -f "server/amq_queue.h" ]; then
        echo server/amq_queue.h>>_package.lst
    fi
    if [ -f "server/amq_queue.c" ]; then
        echo server/amq_queue.c>>_package.lst
    fi
    if [ -f "server/amq_queue_table_test.c" ]; then
        echo server/amq_queue_table_test.c>>_package.lst
    fi
    if [ -f "server/amq_queue_table.h" ]; then
        echo server/amq_queue_table.h>>_package.lst
    fi
    if [ -f "server/amq_queue_table.c" ]; then
        echo server/amq_queue_table.c>>_package.lst
    fi
    if [ -f "server/amq_queue_list_test.c" ]; then
        echo server/amq_queue_list_test.c>>_package.lst
    fi
    if [ -f "server/amq_queue_list.h" ]; then
        echo server/amq_queue_list.h>>_package.lst
    fi
    if [ -f "server/amq_queue_list.c" ]; then
        echo server/amq_queue_list.c>>_package.lst
    fi
    if [ -f "server/amq_queue_set_test.c" ]; then
        echo server/amq_queue_set_test.c>>_package.lst
    fi
    if [ -f "server/amq_queue_set.h" ]; then
        echo server/amq_queue_set.h>>_package.lst
    fi
    if [ -f "server/amq_queue_set.c" ]; then
        echo server/amq_queue_set.c>>_package.lst
    fi
    if [ -f "server/amq_queue_basic_test.c" ]; then
        echo server/amq_queue_basic_test.c>>_package.lst
    fi
    if [ -f "server/amq_queue_basic.h" ]; then
        echo server/amq_queue_basic.h>>_package.lst
    fi
    if [ -f "server/amq_queue_basic.c" ]; then
        echo server/amq_queue_basic.c>>_package.lst
    fi
    if [ -f "server/amq_connection_agent.smt" ]; then
        echo server/amq_connection_agent.smt>>_package.lst
    fi
    if [ -f "server/amq_connection_agent.h" ]; then
        echo server/amq_connection_agent.h>>_package.lst
    fi
    if [ -f "server/amq_connection_agent.c" ]; then
        echo server/amq_connection_agent.c>>_package.lst
    fi
    if [ -f "server/amq_connection_test.c" ]; then
        echo server/amq_connection_test.c>>_package.lst
    fi
    if [ -f "server/amq_connection.h" ]; then
        echo server/amq_connection.h>>_package.lst
    fi
    if [ -f "server/amq_connection.c" ]; then
        echo server/amq_connection.c>>_package.lst
    fi
    if [ -f "server/amq_connection_by_broker_test.c" ]; then
        echo server/amq_connection_by_broker_test.c>>_package.lst
    fi
    if [ -f "server/amq_connection_by_broker.h" ]; then
        echo server/amq_connection_by_broker.h>>_package.lst
    fi
    if [ -f "server/amq_connection_by_broker.c" ]; then
        echo server/amq_connection_by_broker.c>>_package.lst
    fi
    if [ -f "server/amq_consumer_test.c" ]; then
        echo server/amq_consumer_test.c>>_package.lst
    fi
    if [ -f "server/amq_consumer.h" ]; then
        echo server/amq_consumer.h>>_package.lst
    fi
    if [ -f "server/amq_consumer.c" ]; then
        echo server/amq_consumer.c>>_package.lst
    fi
    if [ -f "server/amq_consumer_table_test.c" ]; then
        echo server/amq_consumer_table_test.c>>_package.lst
    fi
    if [ -f "server/amq_consumer_table.h" ]; then
        echo server/amq_consumer_table.h>>_package.lst
    fi
    if [ -f "server/amq_consumer_table.c" ]; then
        echo server/amq_consumer_table.c>>_package.lst
    fi
    if [ -f "server/amq_consumer_by_queue_test.c" ]; then
        echo server/amq_consumer_by_queue_test.c>>_package.lst
    fi
    if [ -f "server/amq_consumer_by_queue.h" ]; then
        echo server/amq_consumer_by_queue.h>>_package.lst
    fi
    if [ -f "server/amq_consumer_by_queue.c" ]; then
        echo server/amq_consumer_by_queue.c>>_package.lst
    fi
    if [ -f "server/amq_consumer_by_channel_test.c" ]; then
        echo server/amq_consumer_by_channel_test.c>>_package.lst
    fi
    if [ -f "server/amq_consumer_by_channel.h" ]; then
        echo server/amq_consumer_by_channel.h>>_package.lst
    fi
    if [ -f "server/amq_consumer_by_channel.c" ]; then
        echo server/amq_consumer_by_channel.c>>_package.lst
    fi
    if [ -f "server/amq_consumer_basic_test.c" ]; then
        echo server/amq_consumer_basic_test.c>>_package.lst
    fi
    if [ -f "server/amq_consumer_basic.h" ]; then
        echo server/amq_consumer_basic.h>>_package.lst
    fi
    if [ -f "server/amq_consumer_basic.c" ]; then
        echo server/amq_consumer_basic.c>>_package.lst
    fi
    if [ -f "server/amq_queue_connection_agent.smt" ]; then
        echo server/amq_queue_connection_agent.smt>>_package.lst
    fi
    if [ -f "server/amq_queue_connection_agent.h" ]; then
        echo server/amq_queue_connection_agent.h>>_package.lst
    fi
    if [ -f "server/amq_queue_connection_agent.c" ]; then
        echo server/amq_queue_connection_agent.c>>_package.lst
    fi
    if [ -f "server/amq_queue_connection_test.c" ]; then
        echo server/amq_queue_connection_test.c>>_package.lst
    fi
    if [ -f "server/amq_queue_connection.h" ]; then
        echo server/amq_queue_connection.h>>_package.lst
    fi
    if [ -f "server/amq_queue_connection.c" ]; then
        echo server/amq_queue_connection.c>>_package.lst
    fi
    if [ -f "server/amq_queue_binding_agent.smt" ]; then
        echo server/amq_queue_binding_agent.smt>>_package.lst
    fi
    if [ -f "server/amq_queue_binding_agent.h" ]; then
        echo server/amq_queue_binding_agent.h>>_package.lst
    fi
    if [ -f "server/amq_queue_binding_agent.c" ]; then
        echo server/amq_queue_binding_agent.c>>_package.lst
    fi
    if [ -f "server/amq_queue_binding_test.c" ]; then
        echo server/amq_queue_binding_test.c>>_package.lst
    fi
    if [ -f "server/amq_queue_binding.h" ]; then
        echo server/amq_queue_binding.h>>_package.lst
    fi
    if [ -f "server/amq_queue_binding.c" ]; then
        echo server/amq_queue_binding.c>>_package.lst
    fi
    if [ -f "server/amq_connection_queue_agent.smt" ]; then
        echo server/amq_connection_queue_agent.smt>>_package.lst
    fi
    if [ -f "server/amq_connection_queue_agent.h" ]; then
        echo server/amq_connection_queue_agent.h>>_package.lst
    fi
    if [ -f "server/amq_connection_queue_agent.c" ]; then
        echo server/amq_connection_queue_agent.c>>_package.lst
    fi
    if [ -f "server/amq_connection_queue_test.c" ]; then
        echo server/amq_connection_queue_test.c>>_package.lst
    fi
    if [ -f "server/amq_connection_queue.h" ]; then
        echo server/amq_connection_queue.h>>_package.lst
    fi
    if [ -f "server/amq_connection_queue.c" ]; then
        echo server/amq_connection_queue.c>>_package.lst
    fi
    if [ -f "server/amq_resource_test.c" ]; then
        echo server/amq_resource_test.c>>_package.lst
    fi
    if [ -f "server/amq_resource.h" ]; then
        echo server/amq_resource.h>>_package.lst
    fi
    if [ -f "server/amq_resource.c" ]; then
        echo server/amq_resource.c>>_package.lst
    fi
    if [ -f "server/amq_server_method_test.c" ]; then
        echo server/amq_server_method_test.c>>_package.lst
    fi
    if [ -f "server/amq_server_method.h" ]; then
        echo server/amq_server_method.h>>_package.lst
    fi
    if [ -f "server/amq_server_method.c" ]; then
        echo server/amq_server_method.c>>_package.lst
    fi
    if [ -f "server/amq_federation_agent.smt" ]; then
        echo server/amq_federation_agent.smt>>_package.lst
    fi
    if [ -f "server/amq_federation_agent.h" ]; then
        echo server/amq_federation_agent.h>>_package.lst
    fi
    if [ -f "server/amq_federation_agent.c" ]; then
        echo server/amq_federation_agent.c>>_package.lst
    fi
    if [ -f "server/amq_federation_test.c" ]; then
        echo server/amq_federation_test.c>>_package.lst
    fi
    if [ -f "server/amq_federation.h" ]; then
        echo server/amq_federation.h>>_package.lst
    fi
    if [ -f "server/amq_federation.c" ]; then
        echo server/amq_federation.c>>_package.lst
    fi
    if [ -f "server/amq_failover_agent.smt" ]; then
        echo server/amq_failover_agent.smt>>_package.lst
    fi
    if [ -f "server/amq_failover_agent.h" ]; then
        echo server/amq_failover_agent.h>>_package.lst
    fi
    if [ -f "server/amq_failover_agent.c" ]; then
        echo server/amq_failover_agent.c>>_package.lst
    fi
    if [ -f "server/amq_failover_test.c" ]; then
        echo server/amq_failover_test.c>>_package.lst
    fi
    if [ -f "server/amq_failover.h" ]; then
        echo server/amq_failover.h>>_package.lst
    fi
    if [ -f "server/amq_failover.c" ]; then
        echo server/amq_failover.c>>_package.lst
    fi
    if [ -f "server/amq_lease_test.c" ]; then
        echo server/amq_lease_test.c>>_package.lst
    fi
    if [ -f "server/amq_lease.h" ]; then
        echo server/amq_lease.h>>_package.lst
    fi
    if [ -f "server/amq_lease.c" ]; then
        echo server/amq_lease.c>>_package.lst
    fi
    if [ -f "server/amq_lease_table_test.c" ]; then
        echo server/amq_lease_table_test.c>>_package.lst
    fi
    if [ -f "server/amq_lease_table.h" ]; then
        echo server/amq_lease_table.h>>_package.lst
    fi
    if [ -f "server/amq_lease_table.c" ]; then
        echo server/amq_lease_table.c>>_package.lst
    fi
    if [ -f "server/amq_console_agent.smt" ]; then
        echo server/amq_console_agent.smt>>_package.lst
    fi
    if [ -f "server/amq_console_agent.h" ]; then
        echo server/amq_console_agent.h>>_package.lst
    fi
    if [ -f "server/amq_console_agent.c" ]; then
        echo server/amq_console_agent.c>>_package.lst
    fi
    if [ -f "server/amq_console_test.c" ]; then
        echo server/amq_console_test.c>>_package.lst
    fi
    if [ -f "server/amq_console.h" ]; then
        echo server/amq_console.h>>_package.lst
    fi
    if [ -f "server/amq_console.c" ]; then
        echo server/amq_console.c>>_package.lst
    fi
    if [ -f "server/amq_console_class_test.c" ]; then
        echo server/amq_console_class_test.c>>_package.lst
    fi
    if [ -f "server/amq_console_class.h" ]; then
        echo server/amq_console_class.h>>_package.lst
    fi
    if [ -f "server/amq_console_class.c" ]; then
        echo server/amq_console_class.c>>_package.lst
    fi
    if [ -f "server/amq_console_config_agent.smt" ]; then
        echo server/amq_console_config_agent.smt>>_package.lst
    fi
    if [ -f "server/amq_console_config_agent.h" ]; then
        echo server/amq_console_config_agent.h>>_package.lst
    fi
    if [ -f "server/amq_console_config_agent.c" ]; then
        echo server/amq_console_config_agent.c>>_package.lst
    fi
    if [ -f "server/amq_console_config_test.c" ]; then
        echo server/amq_console_config_test.c>>_package.lst
    fi
    if [ -f "server/amq_console_config.h" ]; then
        echo server/amq_console_config.h>>_package.lst
    fi
    if [ -f "server/amq_console_config.c" ]; then
        echo server/amq_console_config.c>>_package.lst
    fi
    if [ -f "server/amq_cml_test.c" ]; then
        echo server/amq_cml_test.c>>_package.lst
    fi
    if [ -f "server/amq_cml.h" ]; then
        echo server/amq_cml.h>>_package.lst
    fi
    if [ -f "server/amq_cml.c" ]; then
        echo server/amq_cml.c>>_package.lst
    fi
    if [ -f "server/stamp_generate" ]; then
        echo server/stamp_generate>>_package.lst
    fi
    if [ -f "server/boomakew.bat" ]; then
        echo server/boomakew.bat>>_package.lst
    fi
    if [ -f "server/configure" ]; then
        echo server/configure>>_package.lst
    fi
    if [ -f "server/Makefile.unix" ]; then
        echo server/Makefile.unix>>_package.lst
    fi
    if [ -f "server/boomake" ]; then
        echo server/boomake>>_package.lst
    fi
    if [ -f "server/configure.bat" ]; then
        echo server/configure.bat>>_package.lst
    fi
    if [ -f "server/Makefile.win32" ]; then
        echo server/Makefile.win32>>_package.lst
    fi
    if [ -f "server/boomake.bat" ]; then
        echo server/boomake.bat>>_package.lst
    fi
    if [ -f "server/amq_server.vcproj" ]; then
        echo server/amq_server.vcproj>>_package.lst
    fi
    if [ -f "server/libamq_server.vcproj" ]; then
        echo server/libamq_server.vcproj>>_package.lst
    fi
    PUSHDIR=`pwd`
    cd shell
    cd $PUSHDIR
    if [ -f "shell/gpl_output" ]; then
        echo shell/gpl_output>>_package.lst
    fi
    if [ -f "shell/version.h" ]; then
        echo shell/version.h>>_package.lst
    fi
    if [ -f "shell/amq_shell.c" ]; then
        echo shell/amq_shell.c>>_package.lst
    fi
    if [ -f "shell/amq_mgt_console.icl" ]; then
        echo shell/amq_mgt_console.icl>>_package.lst
    fi
    if [ -f "shell/amq_mgt_broker.icl" ]; then
        echo shell/amq_mgt_broker.icl>>_package.lst
    fi
    if [ -f "shell/amq_mgt_exchange.icl" ]; then
        echo shell/amq_mgt_exchange.icl>>_package.lst
    fi
    if [ -f "shell/amq_mgt_binding.icl" ]; then
        echo shell/amq_mgt_binding.icl>>_package.lst
    fi
    if [ -f "shell/amq_mgt_queue.icl" ]; then
        echo shell/amq_mgt_queue.icl>>_package.lst
    fi
    if [ -f "shell/amq_mgt_config.icl" ]; then
        echo shell/amq_mgt_config.icl>>_package.lst
    fi
    if [ -f "shell/amq_mgt_connection.icl" ]; then
        echo shell/amq_mgt_connection.icl>>_package.lst
    fi
    if [ -f "shell/amq_mgt_queue_connection.icl" ]; then
        echo shell/amq_mgt_queue_connection.icl>>_package.lst
    fi
    if [ -f "shell/amq_mgt_queue_binding.icl" ]; then
        echo shell/amq_mgt_queue_binding.icl>>_package.lst
    fi
    if [ -f "shell/amq_mgt_connection_queue.icl" ]; then
        echo shell/amq_mgt_connection_queue.icl>>_package.lst
    fi
    if [ -f "shell/amq_operate_api.gsl" ]; then
        echo shell/amq_operate_api.gsl>>_package.lst
    fi
    if [ -f "shell/prelude.pdl" ]; then
        echo shell/prelude.pdl>>_package.lst
    fi
    if [ -f "shell/license.gpl" ]; then
        echo shell/license.gpl>>_package.lst
    fi
    if [ -f "shell/project.pdl" ]; then
        echo shell/project.pdl>>_package.lst
    fi
    if [ -f "shell/readme.txt" ]; then
        echo shell/readme.txt>>_package.lst
    fi
    if [ -f "shell/amq_mgt_console_test.c" ]; then
        echo shell/amq_mgt_console_test.c>>_package.lst
    fi
    if [ -f "shell/amq_mgt_console.h" ]; then
        echo shell/amq_mgt_console.h>>_package.lst
    fi
    if [ -f "shell/amq_mgt_console.c" ]; then
        echo shell/amq_mgt_console.c>>_package.lst
    fi
    if [ -f "shell/amq_mgt_broker_test.c" ]; then
        echo shell/amq_mgt_broker_test.c>>_package.lst
    fi
    if [ -f "shell/amq_mgt_broker.h" ]; then
        echo shell/amq_mgt_broker.h>>_package.lst
    fi
    if [ -f "shell/amq_mgt_broker.c" ]; then
        echo shell/amq_mgt_broker.c>>_package.lst
    fi
    if [ -f "shell/amq_mgt_exchange_test.c" ]; then
        echo shell/amq_mgt_exchange_test.c>>_package.lst
    fi
    if [ -f "shell/amq_mgt_exchange.h" ]; then
        echo shell/amq_mgt_exchange.h>>_package.lst
    fi
    if [ -f "shell/amq_mgt_exchange.c" ]; then
        echo shell/amq_mgt_exchange.c>>_package.lst
    fi
    if [ -f "shell/amq_mgt_binding_test.c" ]; then
        echo shell/amq_mgt_binding_test.c>>_package.lst
    fi
    if [ -f "shell/amq_mgt_binding.h" ]; then
        echo shell/amq_mgt_binding.h>>_package.lst
    fi
    if [ -f "shell/amq_mgt_binding.c" ]; then
        echo shell/amq_mgt_binding.c>>_package.lst
    fi
    if [ -f "shell/amq_mgt_queue_test.c" ]; then
        echo shell/amq_mgt_queue_test.c>>_package.lst
    fi
    if [ -f "shell/amq_mgt_queue.h" ]; then
        echo shell/amq_mgt_queue.h>>_package.lst
    fi
    if [ -f "shell/amq_mgt_queue.c" ]; then
        echo shell/amq_mgt_queue.c>>_package.lst
    fi
    if [ -f "shell/amq_mgt_config_test.c" ]; then
        echo shell/amq_mgt_config_test.c>>_package.lst
    fi
    if [ -f "shell/amq_mgt_config.h" ]; then
        echo shell/amq_mgt_config.h>>_package.lst
    fi
    if [ -f "shell/amq_mgt_config.c" ]; then
        echo shell/amq_mgt_config.c>>_package.lst
    fi
    if [ -f "shell/amq_mgt_connection_test.c" ]; then
        echo shell/amq_mgt_connection_test.c>>_package.lst
    fi
    if [ -f "shell/amq_mgt_connection.h" ]; then
        echo shell/amq_mgt_connection.h>>_package.lst
    fi
    if [ -f "shell/amq_mgt_connection.c" ]; then
        echo shell/amq_mgt_connection.c>>_package.lst
    fi
    if [ -f "shell/amq_mgt_queue_connection_test.c" ]; then
        echo shell/amq_mgt_queue_connection_test.c>>_package.lst
    fi
    if [ -f "shell/amq_mgt_queue_connection.h" ]; then
        echo shell/amq_mgt_queue_connection.h>>_package.lst
    fi
    if [ -f "shell/amq_mgt_queue_connection.c" ]; then
        echo shell/amq_mgt_queue_connection.c>>_package.lst
    fi
    if [ -f "shell/amq_mgt_queue_binding_test.c" ]; then
        echo shell/amq_mgt_queue_binding_test.c>>_package.lst
    fi
    if [ -f "shell/amq_mgt_queue_binding.h" ]; then
        echo shell/amq_mgt_queue_binding.h>>_package.lst
    fi
    if [ -f "shell/amq_mgt_queue_binding.c" ]; then
        echo shell/amq_mgt_queue_binding.c>>_package.lst
    fi
    if [ -f "shell/amq_mgt_connection_queue_test.c" ]; then
        echo shell/amq_mgt_connection_queue_test.c>>_package.lst
    fi
    if [ -f "shell/amq_mgt_connection_queue.h" ]; then
        echo shell/amq_mgt_connection_queue.h>>_package.lst
    fi
    if [ -f "shell/amq_mgt_connection_queue.c" ]; then
        echo shell/amq_mgt_connection_queue.c>>_package.lst
    fi
    if [ -f "shell/stamp_generate" ]; then
        echo shell/stamp_generate>>_package.lst
    fi
    if [ -f "shell/boomakew.bat" ]; then
        echo shell/boomakew.bat>>_package.lst
    fi
    if [ -f "shell/configure" ]; then
        echo shell/configure>>_package.lst
    fi
    if [ -f "shell/Makefile.unix" ]; then
        echo shell/Makefile.unix>>_package.lst
    fi
    if [ -f "shell/boomake" ]; then
        echo shell/boomake>>_package.lst
    fi
    if [ -f "shell/configure.bat" ]; then
        echo shell/configure.bat>>_package.lst
    fi
    if [ -f "shell/Makefile.win32" ]; then
        echo shell/Makefile.win32>>_package.lst
    fi
    if [ -f "shell/boomake.bat" ]; then
        echo shell/boomake.bat>>_package.lst
    fi
    if [ -f "shell/amq_shell.vcproj" ]; then
        echo shell/amq_shell.vcproj>>_package.lst
    fi
    if [ -f "shell/libamq_shell.vcproj" ]; then
        echo shell/libamq_shell.vcproj>>_package.lst
    fi
    PUSHDIR=`pwd`
    cd zyre
    cd $PUSHDIR
    if [ -f "zyre/version.h" ]; then
        echo zyre/version.h>>_package.lst
    fi
    if [ -f "zyre/zyre.c" ]; then
        echo zyre/zyre.c>>_package.lst
    fi
    if [ -f "zyre/zyre_main.inc" ]; then
        echo zyre/zyre_main.inc>>_package.lst
    fi
    if [ -f "zyre/zyre_config.opf" ]; then
        echo zyre/zyre_config.opf>>_package.lst
    fi
    if [ -f "zyre/zyre_config.icl" ]; then
        echo zyre/zyre_config.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_backend.icl" ]; then
        echo zyre/zyre_backend.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_resource.icl" ]; then
        echo zyre/zyre_resource.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_domain.icl" ]; then
        echo zyre/zyre_domain.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_feed.icl" ]; then
        echo zyre/zyre_feed.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_pipe.icl" ]; then
        echo zyre/zyre_pipe.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_join.icl" ]; then
        echo zyre/zyre_join.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_message.icl" ]; then
        echo zyre/zyre_message.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_content.icl" ]; then
        echo zyre/zyre_content.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_restms.icl" ]; then
        echo zyre/zyre_restms.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_amqp_feed.icl" ]; then
        echo zyre/zyre_amqp_feed.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_amqp_pipe.icl" ]; then
        echo zyre/zyre_amqp_pipe.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_amqp_join.icl" ]; then
        echo zyre/zyre_amqp_join.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_backend_amqp.icl" ]; then
        echo zyre/zyre_backend_amqp.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_digest_amqp.icl" ]; then
        echo zyre/zyre_digest_amqp.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_peer.asl" ]; then
        echo zyre/zyre_peer.asl>>_package.lst
    fi
    if [ -f "zyre/zyre_peer_method.icl" ]; then
        echo zyre/zyre_peer_method.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_peer_config.opf" ]; then
        echo zyre/zyre_peer_config.opf>>_package.lst
    fi
    if [ -f "zyre/zyre_peer_config.icl" ]; then
        echo zyre/zyre_peer_config.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_peer_config.txt" ]; then
        echo zyre/zyre_peer_config.txt>>_package.lst
    fi
    if [ -f "zyre/zyre_peer_agent.smt" ]; then
        echo zyre/zyre_peer_agent.smt>>_package.lst
    fi
    if [ -f "zyre/zyre_classes.icl" ]; then
        echo zyre/zyre_classes.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_static.rc" ]; then
        echo zyre/zyre_static.rc>>_package.lst
    fi
    if [ -f "zyre/zyre_base.cfg" ]; then
        echo zyre/zyre_base.cfg>>_package.lst
    fi
    if [ -f "zyre/prelude.pdl" ]; then
        echo zyre/prelude.pdl>>_package.lst
    fi
    if [ -f "zyre/license.gpl" ]; then
        echo zyre/license.gpl>>_package.lst
    fi
    if [ -f "zyre/project.pdl" ]; then
        echo zyre/project.pdl>>_package.lst
    fi
    if [ -f "zyre/readme.txt" ]; then
        echo zyre/readme.txt>>_package.lst
    fi
    if [ -f "zyre/zyre_config_test.c" ]; then
        echo zyre/zyre_config_test.c>>_package.lst
    fi
    if [ -f "zyre/zyre_config.h" ]; then
        echo zyre/zyre_config.h>>_package.lst
    fi
    if [ -f "zyre/zyre_config.c" ]; then
        echo zyre/zyre_config.c>>_package.lst
    fi
    if [ -f "zyre/zyre_backend_front.icl" ]; then
        echo zyre/zyre_backend_front.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_backend_back.icl" ]; then
        echo zyre/zyre_backend_back.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_backend_test.c" ]; then
        echo zyre/zyre_backend_test.c>>_package.lst
    fi
    if [ -f "zyre/zyre_backend.h" ]; then
        echo zyre/zyre_backend.h>>_package.lst
    fi
    if [ -f "zyre/zyre_backend.c" ]; then
        echo zyre/zyre_backend.c>>_package.lst
    fi
    if [ -f "zyre/zyre_resource_front.icl" ]; then
        echo zyre/zyre_resource_front.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_resource_back.icl" ]; then
        echo zyre/zyre_resource_back.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_resource_test.c" ]; then
        echo zyre/zyre_resource_test.c>>_package.lst
    fi
    if [ -f "zyre/zyre_resource.h" ]; then
        echo zyre/zyre_resource.h>>_package.lst
    fi
    if [ -f "zyre/zyre_resource.c" ]; then
        echo zyre/zyre_resource.c>>_package.lst
    fi
    if [ -f "zyre/zyre_domain_test.c" ]; then
        echo zyre/zyre_domain_test.c>>_package.lst
    fi
    if [ -f "zyre/zyre_domain.h" ]; then
        echo zyre/zyre_domain.h>>_package.lst
    fi
    if [ -f "zyre/zyre_domain.c" ]; then
        echo zyre/zyre_domain.c>>_package.lst
    fi
    if [ -f "zyre/zyre_feed_test.c" ]; then
        echo zyre/zyre_feed_test.c>>_package.lst
    fi
    if [ -f "zyre/zyre_feed.h" ]; then
        echo zyre/zyre_feed.h>>_package.lst
    fi
    if [ -f "zyre/zyre_feed.c" ]; then
        echo zyre/zyre_feed.c>>_package.lst
    fi
    if [ -f "zyre/zyre_pipe_test.c" ]; then
        echo zyre/zyre_pipe_test.c>>_package.lst
    fi
    if [ -f "zyre/zyre_pipe.h" ]; then
        echo zyre/zyre_pipe.h>>_package.lst
    fi
    if [ -f "zyre/zyre_pipe.c" ]; then
        echo zyre/zyre_pipe.c>>_package.lst
    fi
    if [ -f "zyre/zyre_join_test.c" ]; then
        echo zyre/zyre_join_test.c>>_package.lst
    fi
    if [ -f "zyre/zyre_join.h" ]; then
        echo zyre/zyre_join.h>>_package.lst
    fi
    if [ -f "zyre/zyre_join.c" ]; then
        echo zyre/zyre_join.c>>_package.lst
    fi
    if [ -f "zyre/zyre_message_test.c" ]; then
        echo zyre/zyre_message_test.c>>_package.lst
    fi
    if [ -f "zyre/zyre_message.h" ]; then
        echo zyre/zyre_message.h>>_package.lst
    fi
    if [ -f "zyre/zyre_message.c" ]; then
        echo zyre/zyre_message.c>>_package.lst
    fi
    if [ -f "zyre/zyre_content_test.c" ]; then
        echo zyre/zyre_content_test.c>>_package.lst
    fi
    if [ -f "zyre/zyre_content.h" ]; then
        echo zyre/zyre_content.h>>_package.lst
    fi
    if [ -f "zyre/zyre_content.c" ]; then
        echo zyre/zyre_content.c>>_package.lst
    fi
    if [ -f "zyre/zyre_restms_agent.smt" ]; then
        echo zyre/zyre_restms_agent.smt>>_package.lst
    fi
    if [ -f "zyre/zyre_restms_agent.h" ]; then
        echo zyre/zyre_restms_agent.h>>_package.lst
    fi
    if [ -f "zyre/zyre_restms_agent.c" ]; then
        echo zyre/zyre_restms_agent.c>>_package.lst
    fi
    if [ -f "zyre/zyre_restms_test.c" ]; then
        echo zyre/zyre_restms_test.c>>_package.lst
    fi
    if [ -f "zyre/zyre_restms.h" ]; then
        echo zyre/zyre_restms.h>>_package.lst
    fi
    if [ -f "zyre/zyre_restms.c" ]; then
        echo zyre/zyre_restms.c>>_package.lst
    fi
    if [ -f "zyre/zyre_amqp_feed_test.c" ]; then
        echo zyre/zyre_amqp_feed_test.c>>_package.lst
    fi
    if [ -f "zyre/zyre_amqp_feed.h" ]; then
        echo zyre/zyre_amqp_feed.h>>_package.lst
    fi
    if [ -f "zyre/zyre_amqp_feed.c" ]; then
        echo zyre/zyre_amqp_feed.c>>_package.lst
    fi
    if [ -f "zyre/zyre_amqp_pipe_test.c" ]; then
        echo zyre/zyre_amqp_pipe_test.c>>_package.lst
    fi
    if [ -f "zyre/zyre_amqp_pipe.h" ]; then
        echo zyre/zyre_amqp_pipe.h>>_package.lst
    fi
    if [ -f "zyre/zyre_amqp_pipe.c" ]; then
        echo zyre/zyre_amqp_pipe.c>>_package.lst
    fi
    if [ -f "zyre/zyre_amqp_join_test.c" ]; then
        echo zyre/zyre_amqp_join_test.c>>_package.lst
    fi
    if [ -f "zyre/zyre_amqp_join.h" ]; then
        echo zyre/zyre_amqp_join.h>>_package.lst
    fi
    if [ -f "zyre/zyre_amqp_join.c" ]; then
        echo zyre/zyre_amqp_join.c>>_package.lst
    fi
    if [ -f "zyre/zyre_backend_amqp_agent.smt" ]; then
        echo zyre/zyre_backend_amqp_agent.smt>>_package.lst
    fi
    if [ -f "zyre/zyre_backend_amqp_agent.h" ]; then
        echo zyre/zyre_backend_amqp_agent.h>>_package.lst
    fi
    if [ -f "zyre/zyre_backend_amqp_agent.c" ]; then
        echo zyre/zyre_backend_amqp_agent.c>>_package.lst
    fi
    if [ -f "zyre/zyre_backend_amqp_test.c" ]; then
        echo zyre/zyre_backend_amqp_test.c>>_package.lst
    fi
    if [ -f "zyre/zyre_backend_amqp.h" ]; then
        echo zyre/zyre_backend_amqp.h>>_package.lst
    fi
    if [ -f "zyre/zyre_backend_amqp.c" ]; then
        echo zyre/zyre_backend_amqp.c>>_package.lst
    fi
    if [ -f "zyre/zyre_digest_amqp_agent.smt" ]; then
        echo zyre/zyre_digest_amqp_agent.smt>>_package.lst
    fi
    if [ -f "zyre/zyre_digest_amqp_agent.h" ]; then
        echo zyre/zyre_digest_amqp_agent.h>>_package.lst
    fi
    if [ -f "zyre/zyre_digest_amqp_agent.c" ]; then
        echo zyre/zyre_digest_amqp_agent.c>>_package.lst
    fi
    if [ -f "zyre/zyre_digest_amqp_test.c" ]; then
        echo zyre/zyre_digest_amqp_test.c>>_package.lst
    fi
    if [ -f "zyre/zyre_digest_amqp.h" ]; then
        echo zyre/zyre_digest_amqp.h>>_package.lst
    fi
    if [ -f "zyre/zyre_digest_amqp.c" ]; then
        echo zyre/zyre_digest_amqp.c>>_package.lst
    fi
    if [ -f "zyre/zyre_peer_method_test.c" ]; then
        echo zyre/zyre_peer_method_test.c>>_package.lst
    fi
    if [ -f "zyre/zyre_peer_method.h" ]; then
        echo zyre/zyre_peer_method.h>>_package.lst
    fi
    if [ -f "zyre/zyre_peer_method.c" ]; then
        echo zyre/zyre_peer_method.c>>_package.lst
    fi
    if [ -f "zyre/zyre_peer_config_test.c" ]; then
        echo zyre/zyre_peer_config_test.c>>_package.lst
    fi
    if [ -f "zyre/zyre_peer_config.h" ]; then
        echo zyre/zyre_peer_config.h>>_package.lst
    fi
    if [ -f "zyre/zyre_peer_config.c" ]; then
        echo zyre/zyre_peer_config.c>>_package.lst
    fi
    if [ -f "zyre/zyre_peer_agent.h" ]; then
        echo zyre/zyre_peer_agent.h>>_package.lst
    fi
    if [ -f "zyre/zyre_peer_agent.c" ]; then
        echo zyre/zyre_peer_agent.c>>_package.lst
    fi
    if [ -f "zyre/zyre_classes.h" ]; then
        echo zyre/zyre_classes.h>>_package.lst
    fi
    if [ -f "zyre/zyre_classes.c" ]; then
        echo zyre/zyre_classes.c>>_package.lst
    fi
    if [ -f "zyre/zyre_static.icl" ]; then
        echo zyre/zyre_static.icl>>_package.lst
    fi
    if [ -f "zyre/zyre_static_test.c" ]; then
        echo zyre/zyre_static_test.c>>_package.lst
    fi
    if [ -f "zyre/zyre_static.h" ]; then
        echo zyre/zyre_static.h>>_package.lst
    fi
    if [ -f "zyre/zyre_static.c" ]; then
        echo zyre/zyre_static.c>>_package.lst
    fi
    if [ -f "zyre/stamp_generate" ]; then
        echo zyre/stamp_generate>>_package.lst
    fi
    if [ -f "zyre/boomakew.bat" ]; then
        echo zyre/boomakew.bat>>_package.lst
    fi
    if [ -f "zyre/configure" ]; then
        echo zyre/configure>>_package.lst
    fi
    if [ -f "zyre/Makefile.unix" ]; then
        echo zyre/Makefile.unix>>_package.lst
    fi
    if [ -f "zyre/boomake" ]; then
        echo zyre/boomake>>_package.lst
    fi
    if [ -f "zyre/configure.bat" ]; then
        echo zyre/configure.bat>>_package.lst
    fi
    if [ -f "zyre/Makefile.win32" ]; then
        echo zyre/Makefile.win32>>_package.lst
    fi
    if [ -f "zyre/boomake.bat" ]; then
        echo zyre/boomake.bat>>_package.lst
    fi
    if [ -f "zyre/zyre.vcproj" ]; then
        echo zyre/zyre.vcproj>>_package.lst
    fi
    if [ -f "zyre/libamq_zyre.vcproj" ]; then
        echo zyre/libamq_zyre.vcproj>>_package.lst
    fi
    if [ -f "zyre/webpages/http_base.css" ]; then
        echo zyre/webpages/http_base.css>>_package.lst
    fi
    if [ -f "zyre/webpages/index.html" ]; then
        echo zyre/webpages/index.html>>_package.lst
    fi
    PUSHDIR=`pwd`
    cd windows
    cd $PUSHDIR
    if [ -f "windows/OpenAMQ.sln" ]; then
        echo windows/OpenAMQ.sln>>_package.lst
    fi
    if [ -f "windows/prelude.pdl" ]; then
        echo windows/prelude.pdl>>_package.lst
    fi
    if [ -f "windows/license.gpl" ]; then
        echo windows/license.gpl>>_package.lst
    fi
    if [ -f "windows/project.pdl" ]; then
        echo windows/project.pdl>>_package.lst
    fi
    if [ -f "windows/readme.txt" ]; then
        echo windows/readme.txt>>_package.lst
    fi
    if [ -f "windows/stamp_generate" ]; then
        echo windows/stamp_generate>>_package.lst
    fi
    if [ -f "windows/boomakew.bat" ]; then
        echo windows/boomakew.bat>>_package.lst
    fi
    if [ -f "windows/configure" ]; then
        echo windows/configure>>_package.lst
    fi
    if [ -f "windows/Makefile.unix" ]; then
        echo windows/Makefile.unix>>_package.lst
    fi
    if [ -f "windows/boomake" ]; then
        echo windows/boomake>>_package.lst
    fi
    if [ -f "windows/configure.bat" ]; then
        echo windows/configure.bat>>_package.lst
    fi
    if [ -f "windows/Makefile.win32" ]; then
        echo windows/Makefile.win32>>_package.lst
    fi
    if [ -f "windows/boomake.bat" ]; then
        echo windows/boomake.bat>>_package.lst
    fi
    echo "Source package successfully generated">common/stamp_source
    echo "common/stamp_source" >>_package.lst
    echo "Source package successfully generated">wireapi/stamp_source
    echo "wireapi/stamp_source" >>_package.lst
    echo "Source package successfully generated">server/stamp_source
    echo "server/stamp_source" >>_package.lst
    echo "Source package successfully generated">shell/stamp_source
    echo "shell/stamp_source" >>_package.lst
    echo "Source package successfully generated">zyre/stamp_source
    echo "zyre/stamp_source" >>_package.lst
    echo "Source package successfully generated">windows/stamp_source
    echo "windows/stamp_source" >>_package.lst
    echo "Source package successfully generated">stamp_source
    echo "stamp_source">>_package.lst
    carp "Building OpenAMQ-$MY_VERSION-src.tar.gz..."
    zip  -rq _package.zip -@<_package.lst
    unzip -q _package.zip -d OpenAMQ-$MY_VERSION
    rm -f OpenAMQ-$MY_VERSION-src.tar.gz
    tar -cf  OpenAMQ-$MY_VERSION-src.tar OpenAMQ-$MY_VERSION
    gzip OpenAMQ-$MY_VERSION-src.tar
    rm -f OpenAMQ-$MY_VERSION-src.zip
    carp "Building OpenAMQ-$MY_VERSION-src.zip..."
    zip -lrmq OpenAMQ-$MY_VERSION-src.zip OpenAMQ-$MY_VERSION
    rm _package.zip
    rm _package.lst
    rm stamp_source
    rm -f common/stamp_source
    rm -f wireapi/stamp_source
    rm -f server/stamp_source
    rm -f shell/stamp_source
    rm -f zyre/stamp_source
    rm -f windows/stamp_source
}

# ----------------------------   BUILD PROJECTS   -----------------------------

a_build_projects() {
:
    rm -rf _install
    mkdir _install
    mkdir _install/lib
    mkdir _install/include
    mkdir _install/bin
    PUSHDIR=`pwd`
    cd common
    if [ -f boomake ]; then
        sh boomake -install ../_install build install || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd wireapi
    if [ -f boomake ]; then
        sh boomake -install ../_install build install || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd server
    if [ -f boomake ]; then
        sh boomake -install ../_install build install || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd shell
    if [ -f boomake ]; then
        sh boomake -install ../_install build install || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd zyre
    if [ -f boomake ]; then
        sh boomake -install ../_install build install || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd windows
    if [ -f boomake ]; then
        sh boomake -install ../_install build install || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
}

# ------------------------   CHECK OPERATING CONTEXT   ------------------------

a_check_operating_context() {
:
    if [ -f ./stamp_stripped ]; then
        event=stripped
    elif [ -f ./stamp_source ]; then
        event=source
    else
        event=repository
    fi
}

# ----------------------------   CLEAN PROJECTS   -----------------------------

a_clean_projects() {
:
    rm -rf _install
    PUSHDIR=`pwd`
    cd common
    if [ -f boomake ]; then
        sh boomake clean || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd wireapi
    if [ -f boomake ]; then
        sh boomake clean || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd server
    if [ -f boomake ]; then
        sh boomake clean || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd shell
    if [ -f boomake ]; then
        sh boomake clean || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd zyre
    if [ -f boomake ]; then
        sh boomake clean || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd windows
    if [ -f boomake ]; then
        sh boomake clean || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    rm -f OpenAMQ_*.zip
    rm -f OpenAMQ_*.tar.gz
}

# ---------------------------   COMPILE PROJECTS   ----------------------------

a_compile_projects() {
:
    PUSHDIR=`pwd`
    cd common
    if [ -f boomake ]; then
        sh boomake compile || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd wireapi
    if [ -f boomake ]; then
        sh boomake compile || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd server
    if [ -f boomake ]; then
        sh boomake compile || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd shell
    if [ -f boomake ]; then
        sh boomake compile || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd zyre
    if [ -f boomake ]; then
        sh boomake compile || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd windows
    if [ -f boomake ]; then
        sh boomake compile || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
}

# ---------------------------   INSTALL PROJECTS   ----------------------------

a_install_projects() {
:
    PUSHDIR=`pwd`
    cd common
    if [ -f boomake ]; then
        sh boomake install || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd wireapi
    if [ -f boomake ]; then
        sh boomake install || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd server
    if [ -f boomake ]; then
        sh boomake install || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd shell
    if [ -f boomake ]; then
        sh boomake install || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd zyre
    if [ -f boomake ]; then
        sh boomake install || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd windows
    if [ -f boomake ]; then
        sh boomake install || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    if [ -f ./installer ]; then
    [ "$BOOM_TRACE" ] && echo "sh ./installer"
    sh ./installer || croak "\"sh ./installer\" failed"
    fi
}

# ----------------------------   REGEN PROJECTS   -----------------------------

a_regen_projects() {
:
    PUSHDIR=`pwd`
    cd common
    if [ -f boomake ]; then
        sh boomake regen || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd wireapi
    if [ -f boomake ]; then
        sh boomake regen || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd server
    if [ -f boomake ]; then
        sh boomake regen || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd shell
    if [ -f boomake ]; then
        sh boomake regen || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd zyre
    if [ -f boomake ]; then
        sh boomake regen || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd windows
    if [ -f boomake ]; then
        sh boomake regen || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
}

# ------------------------   REPORT HELP INFORMATION   ------------------------

a_report_help_information() {
:
    echo "The commands you can currently use on this project are:"
    echo ""
    eval "actions_$state"
}

# ------------------------   REPORT PROJECT VERSION   -------------------------

a_report_project_version() {
:
    echo "OpenAMQ-1.4c1"
}

# -----------------------------   TEST PROJECTS   -----------------------------

a_test_projects() {
:
    PUSHDIR=`pwd`
    cd common
    if [ -f boomake ]; then
        sh boomake test || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd wireapi
    if [ -f boomake ]; then
        sh boomake test || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd server
    if [ -f boomake ]; then
        sh boomake test || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd shell
    if [ -f boomake ]; then
        sh boomake test || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd zyre
    if [ -f boomake ]; then
        sh boomake test || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    PUSHDIR=`pwd`
    cd windows
    if [ -f boomake ]; then
        sh boomake test || croak
    else
        croak "Project has not been configured - boomake is missing"
    fi
    cd $PUSHDIR
    if [ -f ./selftest ]; then
    [ "$BOOM_TRACE" ] && echo "sh ./selftest"
    sh ./selftest || croak "\"sh ./selftest\" failed"
    fi
}

# ----------------------   USE SOURCE CONTROL REVISION   ----------------------

a_use_source_control_revision() {
:
    if [ -d .svn ]; then
        SVN_REVISION="`svn info | awk '/^Revision:/ { print $2 }'`"
    else
        SVN_REVISION="svn"
    fi
    MY_VERSION=${MY_VERSION}-${SVN_REVISION}
}

actions_initial() {
    return
}

actions_initial_check() {
    return
}

actions_repository() {
echo "build:"
    echo "  For each project in the product, regenerate code and build binary"
    echo "    files ready for installation.  The projects are built in their"
    echo "    individual directories and installed into the temporary install tree."
echo "compile:"
    echo "  For each project in the product, build binary files ready for installation,"
    echo "    but don't run the code generation phase .  The projects are built in their"
    echo "    individual directories and installed into the temporary install tree."
echo "clean:"
    echo "  Deletes generated project files.  This action removes generated source"
    echo "    and binary files."
echo "regen:"
    echo "  For each project in the product, regenerate any source files that"
    echo "    are produced via GSL, Libero or another code generation tool."
    echo "    Generates only those files that are required to build under"
    echo "    the current model."
echo "allgen:"
    echo "  For each project in the product, regenerate any source files that"
    echo "    are produced via GSL, Libero or another code generation tool."
    echo "    Generates all files."
echo "distrib:"
    echo "  Build all projects and create full distribution packages.  If you do"
    echo "    not want to rebuild the projects, you can use the 'distsrc' and 'distbin'"
    echo "    actions as shortcuts."
echo "distsrc:"
    echo "  Build source distribution packages based on product version number."
echo "distrev:"
    echo "  Build source distribution packages based on source control revision"
    echo "    number."
actions_default
    return
}

actions_source() {
echo "build:"
    echo "  For each project in the product, build binary files ready for"
    echo "    installation.  The projects are built in their individual directories"
    echo "    and installed into the temporary install tree."
echo "clean:"
    echo "  Deletes generated project files.  This action removes generated binary"
    echo "    files."
echo "regen:"
    echo "  For each project in the product, regenerate any source files that"
    echo "    are produced via GSL, Libero or another code generation tool."
    echo "    Generates only those files that are required to build under"
    echo "    the current model."
echo "allgen:"
    echo "  For each project in the product, regenerate any source files that"
    echo "    are produced via GSL, Libero or another code generation tool."
    echo "    Generates all files."
actions_default
    return
}

actions_stripped() {
echo "build:"
    echo "  For each project in the product, build binary files ready for"
    echo "    installation.  The projects are built in their individual directories"
    echo "    and installed into the temporary install tree."
echo "clean:"
    echo "  Deletes generated project files.  This action removes generated binary"
    echo "    files."
actions_default
    return
}

actions_default() {
echo "install:"
    echo "  Install each project into its target directory.  The projects must"
    echo "    have been built (and installed into the temporary install tree, which"
    echo "    is what the build action does)."
echo "distbin:"
    echo "  Build binary distribution packages.  The actual packages built depend on"
    echo "    the project packagers used, but typically you will get a ZIP or TGZ file"
    echo "    containing all the projects' deliverables.  Note that this action works"
    echo "    entirely from the temporary install tree, which the 'build' action makes."
echo "test:"
    echo "  Runs each project's test process."
echo "help:"
    echo "  Shows a list of the commands allowed on the project."
echo "version:"
    echo "  Show product version."
    return
}

#   State machine starts here
#
firsttime=true
while [ "$1" -o "$firsttime" ]; do
  firsttime=
  state=initial
  event=ok
  debug=
  export state event debug
  while [ -n "$state" ]; do
    if [ "$inherit_state" ]; then
        check_state=$inherit_state
        inherit_state=
    else
        check_state=$state
    fi
    case "$check_state" in
    initial)
        if [ -n "$debug" ]; then
            echo "State: initial"
        fi
        case "$event" in
        "")
            if [ -n "$debug" ]; then
                echo "Get event from user"
            fi
            if [ "$1" ]; then
                event=$1
                shift
            else
                event=empty
            fi
            continue
        ;;
        ok)
            if [ -n "$debug" ]; then
                echo "Event: ok"
            fi
            event=
            exception=
            if [ -n "$debug" ]; then
                echo "Action: check operating context"
            fi
            if [ -z "$exception" ]; then
                a_check_operating_context
            fi
            state=initial_check
            if [ -n "$exception" ]; then
                continue
            fi
        ;;
        *)
            echo "Unknown command - use one of:"
            echo ""
            eval "actions_$state"
            exit 1
        ;;
        esac
    ;;
    initial_check)
        if [ -n "$debug" ]; then
            echo "State: initial check"
        fi
        case "$event" in
        "")
            if [ -n "$debug" ]; then
                echo "Get event from user"
            fi
            if [ "$1" ]; then
                event=$1
                shift
            else
                event=empty
            fi
            continue
        ;;
        repository)
            if [ -n "$debug" ]; then
                echo "Event: repository"
            fi
            event=
            exception=
            state=repository
            if [ -n "$exception" ]; then
                continue
            fi
        ;;
        source)
            if [ -n "$debug" ]; then
                echo "Event: source"
            fi
            event=
            exception=
            state=source
            if [ -n "$exception" ]; then
                continue
            fi
        ;;
        stripped)
            if [ -n "$debug" ]; then
                echo "Event: stripped"
            fi
            event=
            exception=
            state=stripped
            if [ -n "$exception" ]; then
                continue
            fi
        ;;
        *)
            echo "Unknown command - use one of:"
            echo ""
            eval "actions_$state"
            exit 1
        ;;
        esac
    ;;
    repository)
        if [ -n "$debug" ]; then
            echo "State: repository"
        fi
        case "$event" in
        "")
            if [ -n "$debug" ]; then
                echo "Get event from user"
            fi
            if [ "$1" ]; then
                event=$1
                shift
            else
                event=empty
            fi
            continue
        ;;
        build)
            if [ -n "$debug" ]; then
                echo "Event: build"
            fi
            event=
            exception=
            if [ -n "$debug" ]; then
                echo "Action: build projects"
            fi
            if [ -z "$exception" ]; then
                a_build_projects
            fi
            if [ -n "$1" -a -z "$exception" ]; then
                continue 2
            fi
            state=
        ;;
        compile)
            if [ -n "$debug" ]; then
                echo "Event: compile"
            fi
            event=
            exception=
            if [ -n "$debug" ]; then
                echo "Action: compile projects"
            fi
            if [ -z "$exception" ]; then
                a_compile_projects
            fi
            if [ -n "$1" -a -z "$exception" ]; then
                continue 2
            fi
            state=
        ;;
        clean)
            if [ -n "$debug" ]; then
                echo "Event: clean"
            fi
            event=
            exception=
            if [ -n "$debug" ]; then
                echo "Action: clean projects"
            fi
            if [ -z "$exception" ]; then
                a_clean_projects
            fi
            if [ -n "$1" -a -z "$exception" ]; then
                continue 2
            fi
            state=
        ;;
        regen)
            if [ -n "$debug" ]; then
                echo "Event: regen"
            fi
            event=
            exception=
            if [ -n "$debug" ]; then
                echo "Action: regen projects"
            fi
            if [ -z "$exception" ]; then
                a_regen_projects
            fi
            if [ -n "$1" -a -z "$exception" ]; then
                continue 2
            fi
            state=
        ;;
        allgen)
            if [ -n "$debug" ]; then
                echo "Event: allgen"
            fi
            event=
            exception=
            if [ -n "$debug" ]; then
                echo "Action: allgen projects"
            fi
            if [ -z "$exception" ]; then
                a_allgen_projects
            fi
            if [ -n "$1" -a -z "$exception" ]; then
                continue 2
            fi
            state=
        ;;
        distrib)
            if [ -n "$debug" ]; then
                echo "Event: distrib"
            fi
            event=
            exception=
            if [ -n "$debug" ]; then
                echo "Action: build projects"
            fi
            if [ -z "$exception" ]; then
                a_build_projects
            fi
            if [ -n "$debug" ]; then
                echo "Action: build product source packages"
            fi
            if [ -z "$exception" ]; then
                a_build_product_source_packages
            fi
            if [ -n "$debug" ]; then
                echo "Action: build product install packages"
            fi
            if [ -z "$exception" ]; then
                a_build_product_install_packages
            fi
            if [ -n "$1" -a -z "$exception" ]; then
                continue 2
            fi
            state=
        ;;
        distsrc)
            if [ -n "$debug" ]; then
                echo "Event: distsrc"
            fi
            event=
            exception=
            if [ -n "$debug" ]; then
                echo "Action: allgen projects"
            fi
            if [ -z "$exception" ]; then
                a_allgen_projects
            fi
            if [ -n "$debug" ]; then
                echo "Action: build product source packages"
            fi
            if [ -z "$exception" ]; then
                a_build_product_source_packages
            fi
            if [ -n "$1" -a -z "$exception" ]; then
                continue 2
            fi
            state=
        ;;
        distrev)
            if [ -n "$debug" ]; then
                echo "Event: distrev"
            fi
            event=
            exception=
            if [ -n "$debug" ]; then
                echo "Action: allgen projects"
            fi
            if [ -z "$exception" ]; then
                a_allgen_projects
            fi
            if [ -n "$debug" ]; then
                echo "Action: use source control revision"
            fi
            if [ -z "$exception" ]; then
                a_use_source_control_revision
            fi
            if [ -n "$debug" ]; then
                echo "Action: build product source packages"
            fi
            if [ -z "$exception" ]; then
                a_build_product_source_packages
            fi
            if [ -n "$1" -a -z "$exception" ]; then
                continue 2
            fi
            state=
        ;;
        *)
            inherit_state=default
        ;;
        esac
    ;;
    source)
        if [ -n "$debug" ]; then
            echo "State: source"
        fi
        case "$event" in
        "")
            if [ -n "$debug" ]; then
                echo "Get event from user"
            fi
            if [ "$1" ]; then
                event=$1
                shift
            else
                event=empty
            fi
            continue
        ;;
        build)
            if [ -n "$debug" ]; then
                echo "Event: build"
            fi
            event=
            exception=
            if [ -n "$debug" ]; then
                echo "Action: build projects"
            fi
            if [ -z "$exception" ]; then
                a_build_projects
            fi
            if [ -n "$1" -a -z "$exception" ]; then
                continue 2
            fi
            state=
        ;;
        clean)
            if [ -n "$debug" ]; then
                echo "Event: clean"
            fi
            event=
            exception=
            if [ -n "$debug" ]; then
                echo "Action: clean projects"
            fi
            if [ -z "$exception" ]; then
                a_clean_projects
            fi
            if [ -n "$1" -a -z "$exception" ]; then
                continue 2
            fi
            state=
        ;;
        regen)
            if [ -n "$debug" ]; then
                echo "Event: regen"
            fi
            event=
            exception=
            if [ -n "$debug" ]; then
                echo "Action: regen projects"
            fi
            if [ -z "$exception" ]; then
                a_regen_projects
            fi
            if [ -n "$1" -a -z "$exception" ]; then
                continue 2
            fi
            state=
        ;;
        allgen)
            if [ -n "$debug" ]; then
                echo "Event: allgen"
            fi
            event=
            exception=
            if [ -n "$debug" ]; then
                echo "Action: allgen projects"
            fi
            if [ -z "$exception" ]; then
                a_allgen_projects
            fi
            if [ -n "$1" -a -z "$exception" ]; then
                continue 2
            fi
            state=
        ;;
        *)
            inherit_state=default
        ;;
        esac
    ;;
    stripped)
        if [ -n "$debug" ]; then
            echo "State: stripped"
        fi
        case "$event" in
        "")
            if [ -n "$debug" ]; then
                echo "Get event from user"
            fi
            if [ "$1" ]; then
                event=$1
                shift
            else
                event=empty
            fi
            continue
        ;;
        build)
            if [ -n "$debug" ]; then
                echo "Event: build"
            fi
            event=
            exception=
            if [ -n "$debug" ]; then
                echo "Action: build projects"
            fi
            if [ -z "$exception" ]; then
                a_build_projects
            fi
            if [ -n "$1" -a -z "$exception" ]; then
                continue 2
            fi
            state=
        ;;
        clean)
            if [ -n "$debug" ]; then
                echo "Event: clean"
            fi
            event=
            exception=
            if [ -n "$debug" ]; then
                echo "Action: clean projects"
            fi
            if [ -z "$exception" ]; then
                a_clean_projects
            fi
            if [ -n "$1" -a -z "$exception" ]; then
                continue 2
            fi
            state=
        ;;
        *)
            inherit_state=default
        ;;
        esac
    ;;
    default)
        if [ -n "$debug" ]; then
            echo "State: default"
        fi
        case "$event" in
        "")
            if [ -n "$debug" ]; then
                echo "Get event from user"
            fi
            if [ "$1" ]; then
                event=$1
                shift
            else
                event=empty
            fi
            continue
        ;;
        install)
            if [ -n "$debug" ]; then
                echo "Event: install"
            fi
            event=
            exception=
            if [ -n "$debug" ]; then
                echo "Action: install projects"
            fi
            if [ -z "$exception" ]; then
                a_install_projects
            fi
            if [ -n "$1" -a -z "$exception" ]; then
                continue 2
            fi
            state=
        ;;
        distbin)
            if [ -n "$debug" ]; then
                echo "Event: distbin"
            fi
            event=
            exception=
            if [ -n "$debug" ]; then
                echo "Action: build product install packages"
            fi
            if [ -z "$exception" ]; then
                a_build_product_install_packages
            fi
            if [ -n "$1" -a -z "$exception" ]; then
                continue 2
            fi
            state=
        ;;
        test)
            if [ -n "$debug" ]; then
                echo "Event: test"
            fi
            event=
            exception=
            if [ -n "$debug" ]; then
                echo "Action: test projects"
            fi
            if [ -z "$exception" ]; then
                a_test_projects
            fi
            if [ -n "$1" -a -z "$exception" ]; then
                continue 2
            fi
            state=
        ;;
        help)
            if [ -n "$debug" ]; then
                echo "Event: help"
            fi
            event=
            exception=
            if [ -n "$debug" ]; then
                echo "Action: report help information"
            fi
            if [ -z "$exception" ]; then
                a_report_help_information
            fi
            if [ -n "$1" -a -z "$exception" ]; then
                continue 2
            fi
            state=
        ;;
        version)
            if [ -n "$debug" ]; then
                echo "Event: version"
            fi
            event=
            exception=
            if [ -n "$debug" ]; then
                echo "Action: report project version"
            fi
            if [ -z "$exception" ]; then
                a_report_project_version
            fi
            if [ -n "$1" -a -z "$exception" ]; then
                continue 2
            fi
            state=
        ;;
        empty)
            if [ -n "$debug" ]; then
                echo "Event: empty"
            fi
            event=
            exception=
            if [ -n "$debug" ]; then
                echo "Action: report help information"
            fi
            if [ -z "$exception" ]; then
                a_report_help_information
            fi
            if [ -n "$1" -a -z "$exception" ]; then
                continue 2
            fi
            state=
        ;;
        *)
            echo "Unknown command - use one of:"
            echo ""
            eval "actions_$state"
            exit 1
        ;;
        esac
    ;;
    esac
  done
done
